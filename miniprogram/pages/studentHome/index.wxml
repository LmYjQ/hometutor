<view class="container">
  <view class="header">
    <view class="user-info" bindtap="goToProfile">
      <image class="avatar" src="{{userInfo.avatarUrl || '/images/default-avatar.png'}}" mode="aspectFill"></image>
      <view class="info">
        <text class="name">{{userInfo.name}}</text>
        <text class="role">å­¦ç”Ÿ</text>
      </view>
    </view>
    <view class="stats">
      <view class="stat-item">
        <text class="num">{{classCount}}</text>
        <text class="label">ç­çº§æ•°</text>
      </view>
      <view class="stat-item">
        <text class="num">{{pendingCount}}</text>
        <text class="label">å¾…å®Œæˆ</text>
      </view>
    </view>
  </view>

  <view class="section-title">
    å¾…å®Œæˆä½œä¸š
    <text class="refresh-btn" bindtap="refreshAssignments">åˆ·æ–°</text>
  </view>

  <view class="debug-info" wx:if="{{debugInfo}}">
    <text>{{debugInfo}}</text>
  </view>

  <view class="assignment-list" wx:if="{{assignments.length > 0}}">
    <view class="assignment-card" wx:for="{{assignments}}" wx:key="_id" bindtap="goToRecitation" data-id="{{item._id}}">
      <view class="assignment-header">
        <text class="class-name">{{item.class_name}}</text>
        <text class="deadline" wx:if="{{item.isOverdue}}" style="color: #ff4d4f;">å·²æˆªæ­¢</text>
        <text class="deadline" wx:else>æˆªæ­¢: {{item.deadlineText}}</text>
      </view>
      <view class="assignment-title">{{item.question_title}}</view>
      <view class="assignment-status" wx:if="{{item.submitted}}">
        <text class="status-tag completed">å·²æäº¤</text>
      </view>
    </view>
  </view>

  <view class="empty-state" wx:else>
    <text class="empty-icon">ğŸ“</text>
    <text class="empty-text">æš‚æ—¶æ²¡æœ‰å¾…å®Œæˆçš„ä½œä¸š</text>
  </view>

  <view class="section-title" wx:if="{{classes.length > 0}}">æˆ‘åŠ å…¥çš„ç­çº§</view>
  <view class="class-list" wx:if="{{classes.length > 0}}">
    <view class="class-item" wx:for="{{classes}}" wx:key="_id">
      <text class="class-name">{{item.name}}</text>
      <text class="teacher-name">{{item.teacher_name}} è€å¸ˆ</text>
    </view>
  </view>

  <view class="bottom-actions">
    <button class="join-btn" bindtap="goToJoinClass">+ åŠ å…¥ç­çº§</button>
  </view>
</view>

<view class="container">
  <!-- åŠ è½½ä¸­ -->
  <view class="loading" wx:if="{{loading}}">
    <text class="loading-text">åŠ è½½ä¸­...</text>
  </view>

  <!-- ä½œä¸šä¿¡æ¯ -->
  <view class="assignment-header" wx:if="{{assignment && !loading}}">
    <view class="class-tag">{{assignment.class_name}}</view>
    <view class="question">{{assignment.question_title}}</view>
    <view class="meta">
      <text class="deadline">æˆªæ­¢: {{assignment.deadlineText}}</text>
      <text class="stats">{{submittedCount}}/{{totalStudentCount}} äººå·²æäº¤</text>
    </view>
  </view>

  <!-- å­¦ç”Ÿæäº¤ç»Ÿè®¡åˆ—è¡¨ -->
  <view class="submissions-section" wx:if="{{!loading && studentStats.length > 0}}">
    <view class="section-title">å­¦ç”Ÿæäº¤ç»Ÿè®¡</view>
    <view class="submission-list">
      <view class="submission-card" wx:for="{{studentStats}}" wx:key="student_id" bindtap="viewStudentSubmissions" data-student-id="{{item.student_id}}" data-student-name="{{item.student_name}}">
        <view class="student-info">
          <image class="avatar" src="{{item.avatarUrl || '/images/default-avatar.png'}}" mode="aspectFill"></image>
          <view class="info">
            <text class="name">{{item.student_name}}</text>
            <text class="submit-count">æäº¤ {{item.submissionCount}} æ¬¡</text>
          </view>
        </view>
        <view class="score-info">
          <view class="best-score {{item.bestScore >= 80 ? 'good' : item.bestScore >= 60 ? 'medium' : 'bad'}}">
            æœ€é«˜ {{item.bestScore}}åˆ†
          </view>
        </view>
      </view>
    </view>
  </view>

  <!-- ç©ºçŠ¶æ€ - æ— æäº¤ -->
  <view class="empty" wx:if="{{!loading && studentStats.length === 0}}">
    <text class="empty-icon">ğŸ“­</text>
    <text class="empty-text">æš‚æ—¶è¿˜æ²¡æœ‰å­¦ç”Ÿæäº¤</text>
  </view>
</view>

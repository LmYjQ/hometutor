<view class="container">
  <!-- åŠ è½½ä¸­ -->
  <view class="loading" wx:if="{{loading}}">
    <text class="loading-text">åŠ è½½ä¸­...</text>
  </view>

  <!-- ä½œä¸šä¿¡æ¯ -->
  <view class="assignment-header" wx:if="{{assignment}}">
    <view class="class-tag">{{assignment.class_name}}</view>
    <view class="question">{{assignment.question_title}}</view>
    <view class="meta">
      <text class="deadline">æˆªæ­¢: {{assignment.deadlineText}}</text>
      <text class="stats">{{submittedCount}}/{{studentCount}} äººå·²æäº¤</text>
    </view>
  </view>

  <!-- æäº¤åˆ—è¡¨ -->
  <view class="submissions-section" wx:if="{{!loading && submissions.length > 0}}">
    <view class="section-title">å­¦ç”Ÿæäº¤ ({{submissions.length}})</view>
    <view class="submission-list">
      <view class="submission-card" wx:for="{{submissions}}" wx:key="_id" bindtap="viewSubmission" data-id="{{item._id}}">
        <view class="student-info">
          <image class="avatar" src="{{item.avatarUrl || '/images/default-avatar.png'}}" mode="aspectFill"></image>
          <view class="info">
            <text class="name">{{item.student_name}}</text>
            <text class="time">{{item.created_atText}}</text>
          </view>
        </view>
        <view class="score-info">
          <view class="score {{item.score >= 80 ? 'good' : item.score >= 60 ? 'medium' : 'bad'}}">
            {{item.score}}åˆ†
          </view>
          <text class="status {{item.status}}">{{item.statusText}}</text>
        </view>
      </view>
    </view>
  </view>

  <!-- ç©ºçŠ¶æ€ -->
  <view class="empty" wx:if="{{!loading && submissions.length === 0}}">
    <text class="empty-icon">ğŸ“­</text>
    <text class="empty-text">æš‚æ—¶è¿˜æ²¡æœ‰å­¦ç”Ÿæäº¤</text>
  </view>
</view>

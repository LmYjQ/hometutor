<view class="chat-container" id="chat-container">
  <!-- èŠå¤©æ¶ˆæ¯åˆ—è¡¨ -->
  <scroll-view class="messages" scroll-y scroll-into-view="{{scrollIntoView}}" scroll-with-animation>
    <block wx:for="{{messages}}" wx:key="id">
      <view id="msg-{{item.id}}" wx:if="{{item.type === 'system'}}" class="message system">
        <view class="bubble system-bubble">{{item.content}}</view>
      </view>

      <view id="msg-{{item.id}}" wx:elif="{{item.type === 'user'}}" class="message user">
        <view class="bubble user-bubble">
          <text>{{item.content}}</text>
          <view wx:if="{{item.attachment}}" class="attachment">
            <text class="icon">ğŸ“„</text>
            <text>{{item.attachment}}</text>
          </view>
        </view>
      </view>

      <view id="msg-{{item.id}}" wx:else class="message assistant">
        <view class="bubble assistant-bubble">
          <text>{{item.content}}</text>
          <view wx:if="{{item.previewData}}" class="preview-actions">
            <button class="btn-primary" bindtap="confirmPublish" loading="{{uploading}}">ç¡®è®¤å‘å¸ƒ</button>
          </view>
        </view>
      </view>
    </block>
  </scroll-view>

  <!-- åº•éƒ¨æ“ä½œåŒº -->
  <view class="footer">
    <view class="action-buttons">
      <button class="upload-btn" bindtap="onPasteFromClipboard" loading="{{uploading}}">
        <text class="icon">ğŸ“‹</text>
        <text>ä»å‰ªè´´æ¿å¤åˆ¶</text>
      </button>
      <button class="upload-btn" bindtap="onChooseImage" loading="{{uploading}}">
        <text class="icon">ğŸ“</text>
        <text>ä¸Šä¼ Excel</text>
      </button>
    </view>
  </view>
</view>
